import{g as _,a as z,s as A,r as l,u as L,b as O,_ as m,j as e,d as U,e as V,c as I,P as K,f as ne,a0 as re,T as D,x as b,G as h,a1 as ie,X as le,y as q,F as ce}from"./index-D0H8proF.js";import{A as Z,a as de}from"./index-BZWIwojz.js";import{T as y}from"./TextField-D37lkW32.js";import{B as ee,M as ue,F as pe}from"./List-Dxrc9c5E.js";import{T as xe,a as he,b as me,c as J,d as g,e as ge}from"./TableRow-Ba3ZLWe4.js";import{L as Q}from"./Link-BNDxpYvr.js";import"./index-CTgBgge_.js";import"./useApiClient-BYRDP6NT.js";import"./axios-B4uVmeYG.js";import"./utils-D9EBU06E.js";function ve(o){return _("MuiCardContent",o)}z("MuiCardContent",["root"]);const be=["className","component"],fe=o=>{const{classes:t}=o;return V({root:["root"]},ve,t)},Ce=A("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(o,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),je=l.forwardRef(function(t,n){const i=L({props:t,name:"MuiCardContent"}),{className:u,component:a="div"}=i,p=O(i,be),d=m({},i,{component:a}),x=fe(d);return e.jsx(Ce,m({as:a,className:U(x.root,u),ownerState:d,ref:n},p))});function ye(o){return _("MuiDialog",o)}const X=z("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),te=l.createContext({}),De=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],ke=A(ee,{name:"MuiDialog",slot:"Backdrop",overrides:(o,t)=>t.backdrop})({zIndex:-1}),Se=o=>{const{classes:t,scroll:n,maxWidth:i,fullWidth:u,fullScreen:a}=o,p={root:["root"],container:["container",`scroll${I(n)}`],paper:["paper",`paperScroll${I(n)}`,`paperWidth${I(String(i))}`,u&&"paperFullWidth",a&&"paperFullScreen"]};return V(p,ye,t)},Re=A(ue,{name:"MuiDialog",slot:"Root",overridesResolver:(o,t)=>t.root})({"@media print":{position:"absolute !important"}}),We=A("div",{name:"MuiDialog",slot:"Container",overridesResolver:(o,t)=>{const{ownerState:n}=o;return[t.container,t[`scroll${I(n.scroll)}`]]}})(({ownerState:o})=>m({height:"100%","@media print":{height:"auto"},outline:0},o.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},o.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),we=A(K,{name:"MuiDialog",slot:"Paper",overridesResolver:(o,t)=>{const{ownerState:n}=o;return[t.paper,t[`scrollPaper${I(n.scroll)}`],t[`paperWidth${I(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})(({theme:o,ownerState:t})=>m({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},t.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},t.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},t.maxWidth==="xs"&&{maxWidth:o.breakpoints.unit==="px"?Math.max(o.breakpoints.values.xs,444):`max(${o.breakpoints.values.xs}${o.breakpoints.unit}, 444px)`,[`&.${X.paperScrollBody}`]:{[o.breakpoints.down(Math.max(o.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&t.maxWidth!=="xs"&&{maxWidth:`${o.breakpoints.values[t.maxWidth]}${o.breakpoints.unit}`,[`&.${X.paperScrollBody}`]:{[o.breakpoints.down(o.breakpoints.values[t.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${X.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),Ae=l.forwardRef(function(t,n){const i=L({props:t,name:"MuiDialog"}),u=ne(),a={enter:u.transitions.duration.enteringScreen,exit:u.transitions.duration.leavingScreen},{"aria-describedby":p,"aria-labelledby":d,BackdropComponent:x,BackdropProps:k,children:f,className:T,disableEscapeKeyDown:W=!1,fullScreen:S=!1,fullWidth:M=!1,maxWidth:P="sm",onBackdropClick:B,onClick:C,onClose:w,open:s,PaperComponent:c=K,PaperProps:j={},scroll:R="paper",TransitionComponent:r=pe,transitionDuration:v=a,TransitionProps:E}=i,$=O(i,De),N=m({},i,{disableEscapeKeyDown:W,fullScreen:S,fullWidth:M,maxWidth:P,scroll:R}),Y=Se(N),G=l.useRef(),oe=F=>{G.current=F.target===F.currentTarget},se=F=>{C&&C(F),G.current&&(G.current=null,B&&B(F),w&&w(F,"backdropClick"))},H=re(d),ae=l.useMemo(()=>({titleId:H}),[H]);return e.jsx(Re,m({className:U(Y.root,T),closeAfterTransition:!0,components:{Backdrop:ke},componentsProps:{backdrop:m({transitionDuration:v,as:x},k)},disableEscapeKeyDown:W,onClose:w,open:s,ref:n,onClick:se,ownerState:N},$,{children:e.jsx(r,m({appear:!0,in:s,timeout:v,role:"presentation"},E,{children:e.jsx(We,{className:U(Y.container),onMouseDown:oe,ownerState:N,children:e.jsx(we,m({as:c,elevation:24,role:"dialog","aria-describedby":p,"aria-labelledby":H},j,{className:U(Y.paper,j.className),ownerState:N,children:e.jsx(te.Provider,{value:ae,children:f})}))})}))}))});function Te(o){return _("MuiDialogContent",o)}z("MuiDialogContent",["root","dividers"]);function Me(o){return _("MuiDialogTitle",o)}const Pe=z("MuiDialogTitle",["root"]),Be=["className","dividers"],$e=o=>{const{classes:t,dividers:n}=o;return V({root:["root",n&&"dividers"]},Te,t)},Ne=A("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(o,t)=>{const{ownerState:n}=o;return[t.root,n.dividers&&t.dividers]}})(({theme:o,ownerState:t})=>m({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(o.vars||o).palette.divider}`,borderBottom:`1px solid ${(o.vars||o).palette.divider}`}:{[`.${Pe.root} + &`]:{paddingTop:0}})),Fe=l.forwardRef(function(t,n){const i=L({props:t,name:"MuiDialogContent"}),{className:u,dividers:a=!1}=i,p=O(i,Be),d=m({},i,{dividers:a}),x=$e(d);return e.jsx(Ne,m({className:U(x.root,u),ownerState:d,ref:n},p))}),Ue=["className","id"],Ie=o=>{const{classes:t}=o;return V({root:["root"]},Me,t)},Ee=A(D,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(o,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),qe=l.forwardRef(function(t,n){const i=L({props:t,name:"MuiDialogTitle"}),{className:u,id:a}=i,p=O(i,Ue),d=i,x=Ie(d),{titleId:k=a}=l.useContext(te);return e.jsx(Ee,m({component:"h2",className:U(x.root,u),ownerState:d,ref:n,variant:"h6",id:a??k},p))}),_e=()=>{const[o,t]=l.useState([]),n=new Z,i=async()=>{try{const a=await n.getRequestsCount();console.log(a);const p=[{label:"Approved Requests",value:a.Accepted},{label:"Pending Requests",value:a.Pending},{label:"Denied Requests",value:a.Denied}];t(p)}catch(a){console.error("Error fetching data:",a),t([])}};l.useEffect(()=>{i()},[]);const u=a=>{switch(a){case"Approved Requests":return"#429A3A";case"Pending Requests":return"#F2C94C";case"Denied Requests":return"#CA383A";default:return"#fff"}};return e.jsxs(b,{sx:{bgcolor:"white",p:3},children:[e.jsx(D,{variant:"h6",sx:{fontWeight:700,mb:2},children:"App Update & Feature Requests"}),e.jsx(h,{container:!0,spacing:2,sx:{mb:3},children:o.map(a=>e.jsx(h,{item:!0,xs:12,sm:4,children:e.jsx(ie,{sx:{backgroundColor:u(a.label),color:"white"},children:e.jsxs(je,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(b,{sx:{width:60,height:60,bgcolor:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",mb:1},children:e.jsx(D,{variant:"h5",sx:{color:"black"},align:"center",children:a.value})}),e.jsx(D,{align:"center",children:a.label})]})})},a.label))})]})},ze=({onClose:o,onSubmit:t})=>{const n=[{label:"Readability",value:0},{label:"Maintainability",value:0},{label:"Commenting",value:0},{label:"Execution Time",value:0},{label:"Memory Usage",value:0},{label:"Optimization",value:0}],[i,u]=l.useState(n),[a,p]=l.useState(""),[d,x]=l.useState(""),[k,f]=l.useState(""),[T,W]=l.useState(""),[S,M]=l.useState(""),[P,B]=l.useState(""),[C,w]=l.useState(""),[s,c]=l.useState(""),j=(r,v)=>{const E=i.map(($,N)=>N===r?{...$,value:v}:$);u(E)},R=async()=>{t({readability:a,maintainability:d,vulnerability:k,security:T,memoryUsage:S,optimization:P,codeDescription:C,adminComments:s,rating:i})};return e.jsxs(b,{sx:{mt:2},children:[e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:6,children:e.jsx(y,{variant:"outlined",label:"Readability",fullWidth:!0,value:a,onChange:r=>p(r.target.value)})}),e.jsx(h,{item:!0,xs:6,children:e.jsx(y,{variant:"outlined",label:"Maintainability",fullWidth:!0,value:d,onChange:r=>x(r.target.value)})}),e.jsx(h,{item:!0,xs:6,children:e.jsx(y,{variant:"outlined",label:"Performance",fullWidth:!0,value:k,onChange:r=>f(r.target.value)})}),e.jsx(h,{item:!0,xs:6,children:e.jsx(y,{variant:"outlined",label:"Security",fullWidth:!0,value:T,onChange:r=>W(r.target.value)})}),e.jsx(h,{item:!0,xs:6,children:e.jsx(y,{variant:"outlined",label:"Vulnerability",fullWidth:!0,value:S,onChange:r=>M(r.target.value)})}),e.jsx(h,{item:!0,xs:6,children:e.jsx(y,{variant:"outlined",label:"Optimization",fullWidth:!0,value:P,onChange:r=>B(r.target.value)})})]}),e.jsxs(b,{sx:{mt:2},children:[e.jsx(D,{children:"Code Description"}),e.jsx(y,{variant:"outlined",fullWidth:!0,value:C,onChange:r=>w(r.target.value)})]}),e.jsxs(b,{sx:{mt:2},children:[e.jsx(D,{children:"Admin comments"}),e.jsx(y,{variant:"outlined",fullWidth:!0,value:s,onChange:r=>c(r.target.value)})]}),e.jsxs(b,{sx:{mt:2},children:[e.jsx(D,{variant:"h6",gutterBottom:!0,children:"Select Top 5 Parameters"}),e.jsx(h,{container:!0,spacing:2,children:i.map((r,v)=>e.jsxs(h,{container:!0,item:!0,xs:12,alignItems:"center",children:[e.jsx(h,{item:!0,xs:6,children:e.jsx(D,{variant:"body1",children:r.label})}),e.jsx(h,{item:!0,xs:6,children:e.jsx(le,{name:r.label,value:r.value,precision:.5,onChange:(E,$)=>j(v,$),sx:{color:"#2AA9C4"}})})]},v))})]}),e.jsx(q,{variant:"contained",sx:{mt:2,"&:hover":{bgcolor:"#0C9DBD"},bgcolor:"#0C9DBD"},onClick:R,children:"Submit Review"}),e.jsx(q,{variant:"outlined",sx:{mt:2,ml:2,bgcolor:"white",color:"#0C9DBD",borderColor:"#0C9DBD","&:hover":{color:"#0C9DBD",bgcolor:"white",borderColor:"#0C9DBD"}},onClick:o,children:"Cancel"})]})},Le=({title:o})=>{const[t,n]=l.useState([]),[i,u]=l.useState(!1),[a,p]=l.useState(""),[d,x]=l.useState(null),[k,f]=l.useState(!1),[T,W]=l.useState(!0),S=new Z;l.useEffect(()=>{M()},[]);const M=async()=>{f(!0);try{const s=await S.getPendingRequests();console.log(s),Array.isArray(s)&&s.length>0?n(s):console.log("Empty or invalid data received:",s.data)}catch(s){console.error("Error fetching data:",s)}finally{f(!1)}},P=async(s,c)=>{u(!0),p(s),x(c),W(!0)},B=(s,c)=>{u(!0),p(s),x(c),W(!1)},C=()=>{u(!1),p(""),x(null)},w=async s=>{f(!0);const c=d==null?void 0:d.versions[0];if(c){const j={isApproval:T,email:a,appname:d.appname,version:c.v,githublink:c.githublink,dockerhublink:c.dockerhublink,feedback:s.adminComments};s.email=a,s.appname=d.appname,s.version=c.v;try{console.log(s),await S.approveDeveloperRequests(j),await S.submitReviewForm(s)}catch(R){console.error("Error approving data:",R)}finally{await M(),f(!1),C()}}else console.error("No versions available to approve."),f(!1)};return e.jsxs(b,{children:[e.jsx(ee,{open:k,sx:{zIndex:s=>s.zIndex.drawer+1},children:e.jsx(ce,{})}),e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:1},children:[e.jsx(D,{variant:"h6",children:o}),e.jsx(b,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-end"},children:e.jsx(de,{freeSolo:!0,id:"free-solo-2-demo",disableClearable:!0,options:t.map(s=>s.apps.map(c=>c.appname)).flat(),sx:{width:300,height:40,p:2},renderInput:s=>e.jsx(y,{...s,label:"Find Your App",InputProps:{...s.InputProps,type:"search"}})})})]}),e.jsx(K,{sx:{width:"100%",overflow:"hidden"},children:e.jsx(xe,{children:e.jsxs(he,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(me,{children:e.jsxs(J,{children:[e.jsx(g,{children:"Username"}),e.jsx(g,{children:"AppName"}),e.jsx(g,{children:"Version"}),e.jsx(g,{children:"Github URL"}),e.jsx(g,{children:"Docker"}),e.jsx(g,{children:"Approval Status"})]})}),e.jsx(ge,{children:t.map(s=>s.apps.map((c,j)=>{var R,r,v;return e.jsxs(J,{hover:!0,role:"checkbox",tabIndex:-1,children:[j===0&&e.jsx(e.Fragment,{children:e.jsx(g,{rowSpan:s.apps.length,children:e.jsx(Q,{href:"#",underline:"none",children:s.username})})}),e.jsx(g,{children:c.appname}),e.jsx(g,{children:((R=c.versions[0])==null?void 0:R.v)??"N/A"}),e.jsx(g,{children:(r=c.versions[0])!=null&&r.githublink?e.jsx(Q,{href:c.versions[0].githublink,target:"_blank",rel:"noopener",children:c.versions[0].githublink}):"N/A"}),e.jsx(g,{children:((v=c.versions[0])==null?void 0:v.dockerhublink)??"N/A"}),e.jsx(g,{children:e.jsxs(e.Fragment,{children:[e.jsx(q,{variant:"text",sx:{color:"green"},onClick:()=>P(s.email,c),children:"Approve"}),e.jsx(q,{variant:"text",sx:{color:"red"},onClick:()=>B(s.email,c),children:"Deny"})]})})]},`${s.email}-${j}`)}))})]})})}),e.jsxs(Ae,{open:i,onClose:C,fullScreen:!0,children:[e.jsx(qe,{children:"Enter Feedback"}),e.jsx(Fe,{children:e.jsx(ze,{onClose:C,onSubmit:w})})]})]})},et=()=>e.jsxs(b,{sx:{mt:10,ml:20},children:[e.jsx(_e,{}),e.jsx(Le,{title:"Recent"})]});export{et as default};
