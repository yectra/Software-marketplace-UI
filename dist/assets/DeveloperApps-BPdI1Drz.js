import{r as l,w as R,j as s,x,T as C,y as h,J as N,K as m,P as $}from"./index-D0H8proF.js";import{u as L,a as P,b as F}from"./AuthHelper-DS3yPrno.js";import{u as z}from"./useIsAuthenticated-ybSJizHP.js";import{a as H}from"./useApiClient-BYRDP6NT.js";import{T as W}from"./TextField-D37lkW32.js";import{T as J,a as K,b as V,c as g,d as n,e as _}from"./TableRow-Ba3ZLWe4.js";import"./axios-B4uVmeYG.js";import"./List-Dxrc9c5E.js";import"./utils-D9EBU06E.js";const{httpPost:T}=H();class q{getAppsbasedonStatus(r){return T("/developer/devdisplay",r).then(a=>a)}getAppsBySearch(r,a){return T(`/developer/devsearch/${r}/${a}`).then(o=>o)}}const G=()=>{var y;const[v,r]=l.useState(0),a=R(),[o,A]=l.useState(""),[c,p]=l.useState([]),{instance:S,inProgress:k,accounts:b}=L(),I=S,u=z(),j=new q;l.useEffect(()=>{const e=P(b);A(e)},[u,b]);const i=async({status:e})=>{const t={email:o,status:e};try{const d=await j.getAppsbasedonStatus(t);console.log(d),p(d)}catch(d){console.error("Error fetching data:",d),p([])}},M=(e,t)=>{r(t),i(t===1?{status:"accepted"}:t===2?{status:"denied"}:{status:"all"})};l.useEffect(()=>{o&&i({status:"all"})},[o]);const U=async e=>{if(console.log(e),e==="")i({status:"all"});else try{const t=await j.getAppsBySearch(o,e);console.log(t),p(t[0])}catch(t){console.error("Error searching:",t),p([])}},D=()=>{F(I,k,u)},E=e=>{a(`/developer/upload/${encodeURIComponent(e)}`)},f=e=>{a(`/developer/monitor/${encodeURIComponent(e)}`)},B=e=>{a(`/developer/appdetails/${encodeURIComponent(e)}`)};return u?s.jsxs(x,{children:[s.jsxs(x,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx(C,{variant:"h6",sx:{ml:1},children:"My Apps"}),s.jsx(W,{label:"Find your app",variant:"outlined",size:"medium",onChange:e=>U(e.target.value),sx:{width:300}})]}),s.jsxs(N,{value:v,onChange:M,sx:{mb:4,mt:2,"& .MuiTabs-indicator":{backgroundColor:"#0C9DBD",height:"2px"},"& .MuiTab-root":{textTransform:"none",fontWeight:"bold",minWidth:100},"& .Mui-selected":{color:"black"}},children:[s.jsx(m,{label:"All"}),s.jsx(m,{label:"Accepted"}),s.jsx(m,{label:"Denied"})]}),s.jsx($,{sx:{width:"100%",overflow:"hidden"},children:s.jsx(J,{children:s.jsxs(K,{stickyHeader:!0,"aria-label":"sticky table",children:[s.jsx(V,{children:s.jsxs(g,{children:[s.jsx(n,{children:"AppName"}),s.jsx(n,{children:"Status"}),s.jsx(n,{children:"Version"}),s.jsx(n,{})]})}),s.jsxs(_,{children:[(y=c.map)==null?void 0:y.call(c,e=>s.jsxs(g,{hover:!0,role:"checkbox",tabIndex:-1,children:[s.jsx(n,{sx:{cursor:"pointer"},onClick:()=>B(e.appname),children:e.appname}),s.jsx(n,{sx:{color:e.status==="In Use"?"green":"inherit"},children:e.versions.length>0?e.versions[e.versions.length-1].status:"N/A"}),s.jsx(n,{children:e.versions.length>0?e.versions[e.versions.length-1].v:"N/A"}),s.jsx(n,{children:e.versions[e.versions.length-1].approvedStatus==="accepted"?s.jsx(h,{variant:"text",color:"primary",onClick:()=>f(e.appname),style:{marginLeft:"8px"},children:"Monitor your site"}):e.versions[e.versions.length-1].approvedStatus==="pending"?s.jsx(h,{variant:"text",color:"primary",onClick:()=>f(e.appname),style:{marginLeft:"8px"},disabled:!0,children:"Monitor your site"}):s.jsx(h,{variant:"text",color:"primary",onClick:()=>E(e.appname),style:{marginLeft:"8px"},children:e.versions[e.versions.length-1].v==="0.0.0"?"Upload":"Update"})})]},e.appname)),c.length===0&&s.jsx(g,{children:s.jsx(n,{colSpan:4,align:"center",children:"No data available"})})]})]})})})]}):s.jsxs(x,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",p:2,boxSizing:"border-box",overflow:"hidden"},children:[s.jsx(C,{variant:"h6",children:"Login to view your apps"}),s.jsx(h,{variant:"text",sx:{color:"#0C9DBD"},onClick:D,children:"Click here to login"})]})},ne=()=>s.jsx(x,{sx:{mt:10,ml:20},children:s.jsx(G,{})});export{ne as default};
