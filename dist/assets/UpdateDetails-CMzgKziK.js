import{r,M as D,w as E,j as t,x,T as o,y as s}from"./index-D0H8proF.js";import{a as S}from"./axios-B4uVmeYG.js";import{u as T,a as B}from"./AuthHelper-DS3yPrno.js";import{T as c}from"./TextField-D37lkW32.js";import"./List-Dxrc9c5E.js";import"./utils-D9EBU06E.js";const G=()=>{const[v,k]=r.useState(""),{appName:n}=D(),[i,b]=r.useState([1,0,0]),[u,f]=r.useState(null),[d,j]=r.useState(""),[h,C]=r.useState(""),[p,w]=r.useState(""),M=E(),{accounts:m}=T();r.useEffect(()=>{const e=B(m);k(e)},[m]);const g={email:v,githublink:d,dockerhublink:h,appname:n||"",version:i.join("."),description:p},y=async()=>{try{console.log(g);const e=await S.put("http://localhost:3000/developer/request",g);M("/developer/myapps"),console.log(e.data)}catch(e){console.error("Error sending approval request:",e)}},l=e=>{let a=[...i];if(u)switch(u){case"Major":a[0]-=1;break;case"Minor":a[1]-=1;break;case"Patch":a[2]-=1;break}switch(e){case"Major":a[0]+=1,a[1]=0,a[2]=0;break;case"Minor":a[1]+=1,a[2]=0;break;case"Patch":a[2]+=1;break}b(a),f(e)};return t.jsxs(x,{sx:{mt:10,ml:20},children:[t.jsxs(o,{variant:"h6",sx:{fontWeight:700,textTransform:"uppercase"},gutterBottom:!0,children:["Update App: ",n]}),t.jsx(o,{gutterBottom:!0,children:"What's New"}),t.jsx(c,{multiline:!0,rows:4,fullWidth:!0,variant:"outlined",margin:"normal",placeholder:"Add the feature updates",value:p,onChange:e=>w(e.target.value),sx:{width:"100%"}}),t.jsx(o,{variant:"h6",sx:{fontWeight:700},children:"Update Details"}),t.jsxs(x,{sx:{display:"flex",justifyContent:"space-between",width:300,mt:2},children:[t.jsx(s,{variant:"contained",onClick:()=>l("Major"),children:"Major"}),t.jsx(s,{variant:"contained",sx:{color:"white",backgroundColor:"green","&:hover":{backgroundColor:"green"}},onClick:()=>l("Minor"),children:"Minor"}),t.jsx(s,{variant:"contained",sx:{color:"white",backgroundColor:"orange","&:hover":{backgroundColor:"orange"}},onClick:()=>l("Patch"),children:"Patch"})]}),t.jsxs(o,{variant:"h6",sx:{mt:2},children:[" Version ",i.join(".")]}),t.jsx(c,{label:`GitHub Link of ${n}`,fullWidth:!0,variant:"outlined",margin:"normal",placeholder:"Enter GitHub link",value:d,onChange:e=>j(e.target.value)}),t.jsx(c,{label:"Link to your Docker Image on hub",fullWidth:!0,variant:"outlined",margin:"normal",placeholder:"Your Docker image link",value:h,onChange:e=>C(e.target.value)}),t.jsx(s,{variant:"contained",sx:{backgroundColor:"#0C9DBD",color:"#fff","&:hover":{backgroundColor:"#0C9DBD"},mt:2},onClick:y,children:"Request for Approval"})]})};export{G as default};
